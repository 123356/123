@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>StationRoom</title>
    @Html.Partial("~/Views/Home/BaseHTML.cshtml")
    <script src="~/Content/UserJS/menucontrol._jm.js" type="text/javascript"></script>
    <script src="~/Content/js/echarts.min3.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="~/Content/css/lightslider.css" />
    <script src="~/Content/js/lightslider2.js" type="text/javascript"></script>
    <script src="~/Content/js/jquery.tabs.js" type="text/javascript"></script>
    <script src="~/Content/UserJS/tab._jm.js" type="text/javascript"></script>
</head>
<body>
    <div class="runningstate state_ledger">
            <!--设备台账-->
            <div class="box demo4">                
                <div class="tab_box">
                    <div>
                        <div class="state_ledgercontent">
                            <h3 class="column_h3">
                                基本信息</h3>
                            <table width="99%" border="0" align="center" cellspacing="5" cellpadding="0" class="page_table_list2">
                                <tr>
                                    <td width="50%">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    设备编码
                                                </td>
                                                <td id="tDeviceCode">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    所属配电房
                                                </td>
                                                <td id="tPName">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    设备型号
                                                </td>
                                                <td id="tDeviceModel">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    设备结构类型
                                                </td>
                                                <td id="tDSTID">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    生产厂家
                                                </td>
                                                <td id="tMFactory">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    购买日期
                                                </td>
                                                <td id="tBuyTime">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    安装地点
                                                </td>
                                                <td id="tInstallAddr">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    所属单位
                                                </td>
                                                <td id="tCompany">
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="50%">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    设备名称
                                                </td>
                                                <td id="tDeviceName">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    设备类型
                                                </td>
                                                <td id="tDTID">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    重要程度
                                                </td>
                                                <td id="tMLID">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    出厂编号
                                                </td>
                                                <td id="tFactoryNumber">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    建档日期
                                                </td>
                                                <td id="tBuildDate">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    使用日期
                                                </td>
                                                <td id="tUseDate">
                                                </td>
                                            </tr>
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    使用状态
                                                </td>
                                                <td id="tUseState">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    最后维护日期
                                                </td>
                                                <td id="tLastMtcDate">
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                            @*<h3 class="column_h3">
                                技术参数</h3>
                            <table width="99%" border="0" align="center" cellspacing="5" cellpadding="0" class="page_table_list2">
                                <tr>
                                    <td width="50%">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    额定电压
                                                </td>
                                                <td id="tRatedVoltage">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    容量
                                                </td>
                                                <td id="tcapacity">
                                                    &nbsp;
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="50%">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                            <tr class="page_table_list2_tr">
                                                <td align="right" style="width: 50%">
                                                    额定电流
                                                </td>
                                                <td id="tRatedCurrent">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td align="right" style="width: 50%">
                                                    &nbsp;
                                                </td>
                                                <td>
                                                    &nbsp;
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>*@
                        </div>
                    </div>
                    <div class="hide state_ledgercontent">
                            <h3 class="column_h3">&nbsp;</h3>
                        <div style="clear:both;">
                            <table id="list_data" style="width: auto;" idfield='TagID' pagination="true" data-options="iconCls:'icon-save',rownumbers:true,pageSize:50,pageList:[10,20,50],toolbar:'#tb',method:'post',striped:true">
                                <thead>
                                    <tr>
                                        <th field='TagID'>
                                            传感器编号
                                        </th>
                                        <th field='DataTypeID' width="10%" data-options="formatter:setType">
                                            传感器类型
                                        </th>
                                        <th field='设备点名' width="10%">
                                            传感器型号
                                        </th>
                                        <th field='版本号' width="10%">
                                            版本号
                                        </th>
                                        <th field='通信地址' width="10%">
                                            信道
                                        </th>
                                        <th field='cname' width="14%" data-options="formatter:setCusName">
                                            生产厂家
                                        </th>
                                        <th field='Remarks' width="14%">
                                            监测位置
                                        </th>
                                        <th field='置0说明' width="10%">
                                            安装日期
                                        </th>
                                        <th field='置0说明' width="10%">
                                            维护日期
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</body>
</html>
<script type="text/javascript">
    $("#currPosition", window.top.document).html("当前位置：状态 > 实时 > 设备台账");
    var Request = new Object();
    Request = GetRequest();
    var pid = Request['pid'], did = Request['did'];
    $('.curve_switch a').bind('click', function () {
        $('.curve_switch a').removeClass('curve_switchactive');
        $(this).addClass('curve_switchactive');
    });
    $(function () {
        loadDeviceInfo();
    });
    function loadDataGrid() {
        $('#list_data').datagrid({
            url: '/State/PointsInfoData?rom=' + Math.random(),
            queryParams: { "rows": 20, "page": 1, "did": did, "tagname": "", "Position": "" },
            singleSelect: true,
            height: 700
        });
    }
    function setType(val) {
        var valName;
        if (val == 1 || val == 12 || val == 24 || val == 26) {
            valName = "温度";
        }
        else if (val == 2) {
            valName = "电流";
        }
        else if (val == 3) {
            valName = "电压";
        }
        else if (val == 13 || val == 25 || val == 27) {
            valName = "湿度";
        }
        else {
            valName = "电力参数 ";
        }
        return valName;
    }
    function setCusName() {
        return "智能电力";
    }
    var formatDate = function (date) {
        var y = date.getFullYear();
        var m = date.getMonth() + 1;
        m = m < 10 ? '0' + m : m;
        var d = date.getDate();
        d = d < 10 ? ('0' + d) : d;
        return y + '-' + m + '-' + d;
    };
    function loadDeviceInfo() {
        $.post("/DeviceManage/DeviceDetail", { "did": did }, function (data) {
            var info = eval("(" + data + ")");
            $("#tDeviceCode").html(info.DeviceCode);
            $("#tDeviceName").html(info.DeviceName);
            $("#tPName").html(info.PName);
            $("#tDeviceModel").html(info.DeviceModel);
            $("#tDTID").html(info.DeviceType);
            $("#tDSTID").html(info.DeviceStructureType);
            $("#tMLID").html(info.MajorLevel);
            $("#tMFactory").html(info.MFactory);
            $("#tFactoryNumber").html(info.FactoryNumber);
            $("#tUseDate").html(info.UseDate.replace('T', " ").substring(0, 10));
            $("#tLastMtcDate").html(info.LastMtcDate.Request);
            $("#tBuildDate").html(info.BuildDate.replace('T', " ").substring(0, 10))
            $("#tBuyTime").html(info.BuyTime.replace('T', " ").substring(0, 10));
            $("#tInstallAddr").html(info.InstallAddr);
            var UseState
            if (info.UseState == 0)
                UseState = "正常使用";
            else
                UseState = "暂停使用";
            $("#tUseState").html(UseState);
            $("#tCompany").html(info.Company);
            $("#tRemarks").html(info.Remarks);

            $("#tRatedVoltage").html(info.M);
            $("#tcapacity").html(info.Z);
            $("#tRatedCurrent").html(info.L);
        });
    }
    function LoadPointList() {

    }
</script>
