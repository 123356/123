@{
    ViewBag.Title = "BudgetSetting";
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>预算设置</title>
    <link rel="stylesheet" href="~/Content/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/iview/dist/styles/iview.css?v=1.01">
    <link rel="stylesheet" href="~/Content/css/modalForm.css?v=1.04" />
    <link rel="stylesheet" type="text/css" href="~/Content/css/EnergyDfficiency.css?v=1.38" />
    <style type="text/css">
        .trActive {
            background: #53bda9;
            color: #fff !important;
        }

        .activeColor {
            color: #fff
        }
    </style>
</head>
<body>
    <div id="app" class="BudgetSetting noPaddingBottom">
        <div class="header">
            <p class="title">
                <date-picker type="year" style="width: 350px" :format="formatDate" v-model="slectYear" :clearable="false" class="selectYear"></date-picker>
            </p>
            <div class="btnView">
                <i-button class="btn" icon="ios-create-outline" v-on:click="edit">{{editName}}</i-button>
                <i-button class="btn" icon="ios-settings-outline" v-on:click="showSetPriceModal">能源单价设置</i-button>
                <!--<i-button class="btn" icon="ios-cloud-upload" v-on:click="upload">历史上传</i-button>
    <input type="file" id="uploadFile" style="display:none" />
    <i-button class="btn" icon="ios-cloud-download-outline">下载</i-button>-->
            </div>
        </div>
        <div class="main">
            <div class="main-item">
                <div class="item-title">
                    <p>集团年能源<br />消耗指标</p>
                    <span><Icon type="ios-arrow-forward" class="icon nexticon" /></span>
                </div>
                <div class="con">
                    <div class="conModule">
                        <h4>计划能耗(万元)</h4>
                        <span>历史参考1400(万)</span>
                        <p>1300</p>
                    </div>
                    <div class="conModule">
                        <h4>余量设置(万元)</h4>
                        <p>100</p>
                    </div>
                    <div class="conModule">
                        <h4>剩余预算(万元)</h4>
                        <p>1200</p>
                    </div>

                </div>
            </div>
            <div class="main-item">
                <div class="item-title">
                    <p>各月能源<br />预算100万</p>
                    <span><Icon type="ios-arrow-forward" class="icon nexticon" /></span>
                </div>
                <div class="con " :style="{'height':height+'px'}">
                    <div class="allMonthCon overflowCon">
                        <table>
                            <tr>
                                <th>月份</th>
                                <th>预算(万)</th>
                            </tr>
                            <tbody>
                                <tr v-for="item in allMonthData">
                                    <td style="width:50px"><span v-if="editIconShow"><Icon type="ios-create-outline" class="icon" /></span>{{item.month}}月</td>
                                    <td><input-number :min="1" v-model="item.money" size="small" style="border:none" :disabled="editDisable"></input-number></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="footer">调整余额-10</div>
            </div>
            <div class="main-item">
                <div class="item-title">
                    <p>2月份能源<br />预算100万</p>
                    <span><Icon type="ios-arrow-forward" class="icon nexticon" /></span>
                </div>
                <div class="con" :style="{'height':height+'px'}">
                    <table>
                        <tr>
                            <th>能源</th>
                            <th>预算(万)</th>
                        </tr>
                        <tbody>
                            <tr v-for="item in energyData">
                                <td><span v-if="editIconShow"><Icon type="ios-create-outline" class="icon" /></span>{{item.type}}</td>
                                <td><input-number :min="1" v-model="item.money" size="small" style="border:none" :disabled="editDisable"></input-number></td>
                            </tr>

                        </tbody>
                    </table>

                </div>
                <div class="footer">调整余额-10</div>
            </div>
            <div class="main-item">
                <div class="item-title">
                    <p>各科室用能<br />预算10万</p>
                    <span><Icon type="ios-arrow-forward" class="icon nexticon" /></span>
                </div>
                <div class="con" :style="{'height':height+'px'}">
                    <div class="overflowCon departBudgetCon">
                        <table>
                            <tr>
                                <th>科室</th>
                                <th>预算(万)</th>
                            </tr>
                            <tbody>
                                <tr v-for="item in departBudgetData">
                                    <td><span v-if="editIconShow"><Icon type="ios-create-outline" class="icon" /></span>{{item.name}}</td>
                                    <td><input-number :min="1" v-model="item.money" size="small" style="border:none" :disabled="editDisable"></input-number></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="footer">调整余额-10</div>
            </div>
            <div class="main-item">
                <div class="item-title">
                    <p>各科室能耗<br />均摊详情</p>
                    <span><Icon type="ios-arrow-forward" class="icon nexticon" /></span>
                </div>
                <div class="con" :style="{'height':height+'px'}">
                    <div class="overflowCon departMoneyCon">
                        <table>
                            <tr>
                                <th>科室</th>
                                <th>预算(万)</th>
                            </tr>
                            <tbody>
                                <tr v-for="item in departMoneyData">
                                    <td><span v-if="editIconShow"><Icon type="ios-create-outline" class="icon" /></span>{{item.name}}</td>
                                    <td><input-number :min="1" v-model="item.money" size="small" style="border:none" :disabled="editDisable"></input-number></td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="footer">调整余额-10</div>
            </div>
            <div class="main-item last-main-item">
                <div class="module">
                    <p class="title"><img src="~/Content/images/energyDifficiency/electric.png" />其它参考数据</p>
                    <span class="dec">建筑面积</span>
                    <p class="numtext">35.00㎡</p>

                    <span class="dec">单位面积能耗</span>
                    <span class="subdec">绿地医院标准能耗5.0/㎡</span>
                    <p class="numtext">6.68</p>

                </div>

                <div class="module">
                    <p class="title"><img src="~/Content/images/energyDifficiency/electric.png" />去年能源消耗</p>
                    <span class="typeName">电/万元</span>
                    <p class="numtext">123.45</p>
                    <span class="typeName">水/万元</span>
                    <p class="numtext">145.21</p>
                    <span class="typeName">气/万元</span>
                    <p class="numtext">32.55</p>
                    <span class="typeName">热/万元</span>
                    <p class="numtext">32.55</p>

                </div>

            </div>
        </div>

        <!--添加模态框-->
        <Modal v-model="setPriceVisable" class="iviewModal addEnergyModal setPriceModal" footer-hide="true" title="能源单价设置" v-on:on-visible-change="setPriceVisableChange">
            <i-form ref="setForm" :model="setForm" :label-width="90" :rules="rules">
                <table style="width:100%">
                    <tr>
                        <td>
                            <form-item prop="elecPriceF" label="电单价(峰)">
                                <input-number placeholder="(国标0.86/kW·h)" v-model="setForm.elecPriceF"></input-number>
                            </form-item>
                        </td>
                        <td>
                            <form-item prop="hotWaterPrice" label="饮用热水" >
                                <input-number placeholder="(国标0.86/m³)" v-model="setForm.hotWaterPrice"></input-number>
                            </form-item>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <form-item prop="elecPriceP" label="电单价(平)">
                                <input-number placeholder="(国标0.61/kW·h)" v-model="setForm.elecPriceP"></input-number>
                            </form-item>
                        </td>
                        <td>
                            <form-item prop="waterPriceL1" label="一级用水">
                                <input-number placeholder="(国标0.61/m³)" v-model="setForm.waterPriceL1"></input-number>
                            </form-item>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <form-item prop="elecPriceG" label="电单价(谷)">
                                <input-number placeholder="(国标0.54/kW·h)" v-model="setForm.elecPriceG"></input-number>
                            </form-item>
                        </td>
                        <td>
                            <form-item prop="waterPriceL2" label="二级用水">
                                <input-number placeholder="(国标0.54/m³)" v-model="setForm.waterPriceL2"></input-number>
                            </form-item>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <form-item prop="gasPrice" label="燃气">
                                <input-number placeholder="(国标0.35/m³)" v-model="setForm.gasPrice"></input-number>
                            </form-item>
                        </td>
                        <td>
                            
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2" class="btnTd">
                            <button type="button" class="btn okBtn" v-on:click="setPrice">添加</button>
                            <button type="button" class="btn cancelBtn" v-on:click="setPriceVisable=false">关闭</button>
                        </td>
                    </tr>

                </table>


            </i-form>
        </Modal>


    </div>

    <script type="text/javascript" src="~/Content/js/jquery-1.12.2.min.js"></script>
    <script src="~/Content/js/echarts.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="~/Content/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="~/Content/js/vue.min.js"></script>
    <script type="text/javascript" src="~/Content/js/vue-resource.min.js"></script>
    <script type="text/javascript" src="~/Content/iview/dist/iview.js"></script>
    <script type="text/javascript" src="~/Content/UserJS/BudgetSetting._zc.js?v=1.100"></script>
</body>
</html>

